# Программа сортировки методом двоичной вставки

Программа реализует устойчивую сортировку данных методом двоичной вставки с возможностью поиска всех вхождений ключа в потоковом режиме.

## Описание метода сортировки

Метод двоичной вставки - это улучшенная версия сортировки вставками, которая использует двоичный поиск для определения позиции вставки нового элемента. Это позволяет уменьшить количество сравнений по сравнению с обычной сортировкой вставками, сохраняя при этом устойчивость алгоритма.

**Эффективность алгоритма:**

- Временная сложность: O(n²)
- Пространственная сложность: O(1)
- Количество сравнений: O(n log n)
- Количество перемещений: O(n²)
- Устойчивость: Да

## Структура проекта

```
.
├── main.c          # Исходный код программы
├── main.h          # Заголовочный файл
├── output/         # Директория для выходных данных
│   ├── keys_out.txt   # Файл с отсортированными ключами
│   └── values_out.txt # Файл с отсортированными значениями
└── tests/          # Директория с тестовыми данными
    ├── keys/       # Ключи тестовых данных
    │   ├── heart.txt
    │   ├── reverse.txt
    │   ├── straight.txt
    │   ├── poem.txt
    │   ├── big.txt
    │   └── twins.txt
    └── values/     # Значения тестовых данных
        ├── heart.txt
        ├── reverse.txt
        ├── straight.txt
        ├── poem.txt
        ├── big.txt
        └── twins.txt
```

## Компиляция

Для компиляции программы используйте команду:

```bash
gcc main.c -o sort_binary_insertion
```

## Использование

### Базовый синтаксис:

```bash
./sort_binary_insertion [опции] <входной_файл>
```

### Доступные опции:

| Опция | Описание |
| --- | --- |
| `-t [N]` | Вывод последних N строк (по умолчанию 12) |
| `-i` | Вывод статистики сортировки |
| `-q` | Тихий режим (без вывода таблицы) |
| `-h` | Вывод справки |

### Примеры использования:

1. Показать справку:

```bash
./sort_binary_insertion -h
```

2. Сортировка файла с выводом всех записей:

```bash
./sort_binary_insertion tests/big.txt
```

3. Вывод последних 5 строк:

```bash
./sort_binary_insertion -t 5 tests/big.txt
```

4. Вывод статистики сортировки:

```bash
./sort_binary_insertion -i tests/big.txt
```

5. Комбинирование опций:

```bash
./sort_binary_insertion -i -t 5 tests/big.txt
```

### Режим поиска

После выполнения сортировки программа переходит в режим потокового ввода ключей для поиска:

- Введите один или несколько ключей (каждый длиной до 5 символов) в одной строке, разделяя их пробелами (например, `a b c` или `a b c` — количество пробелов не имеет значения).
- Если ключ длиннее 5 символов, будет выведено предупреждение, и поиск для этого ключа пропущен.
- Программа выполнит поиск и выведет все вхождения каждого ключа с их позициями и значениями.
- Для завершения ввода нажмите Ctrl+D (в Unix) или Ctrl+Z (в Windows).

Пример:

```bash
./sort_binary_insertion tests/test.txt

Отсортированная таблица:

a 1
a 2
a 3
b 4
c 5
d 6
f 7
g 8

Введите ключи для поиска (несколько ключей через пробел, Ctrl+D для завершения в Unix, Ctrl+Z в Windows):
a b applebanana c
Поиск по ключу 'a': найдено 3 вхождения:
Позиция 1: значение 1
Позиция 2: значение 2
Позиция 3: значение 3

Поиск по ключу 'b': найдено 1 вхождение:
Позиция 4: значение 4

Предупреждение: ключ 'applebanana' длиннее 5 знаков, поиск пропущен

Поиск по ключу 'c': найдено 1 вхождение:
Позиция 5: значение 5

^Z

Поиск завершён.
```

### Формат входных данных

Тестовые данные хранятся в двух папках: `tests/keys` и `tests/values`. Для каждого тестового набора данных:

- Файл в `tests/keys/<имя_файла>` содержит ключи (по одному на строку).
- Файл в `tests/values/<имя_файла>` содержит значения (по одному на строку).
- Ключи и значения связаны по номеру строки.

Пример для `tests/keys/big.txt`:

```
apple
berry
cherry
```

Пример для `tests/values/big.txt`:

```
один
два
три
```

### Выходные данные

1. Отсортированные данные записываются в два файла:
   - `output/keys_out.txt` (ключи)
   - `output/values_out.txt` (значения)
2. В консоль выводится:
   - Отсортированная таблица (если не указан флаг `-q`)
   - Статистика сортировки (если указан флаг `-i`)
   - Результаты поиска в потоковом режиме
