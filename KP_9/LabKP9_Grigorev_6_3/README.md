# Программа сортировки методом двоичной вставки

Программа реализует устойчивую сортировку данных методом двоичной вставки с возможностью поиска по ключу и различными опциями вывода результатов.

## Описание метода сортировки

Метод двоичной вставки - это улучшенная версия сортировки вставками, которая использует двоичный поиск для определения позиции вставки нового элемента. Это позволяет уменьшить количество сравнений по сравнению с обычной сортировкой вставками, сохраняя при этом устойчивость алгоритма.

**Эффективность алгоритма:**
- Временная сложность: O(n²)
- Пространственная сложность: O(1)
- Количество сравнений: O(n log n)
- Количество перемещений: O(n²)
- Устойчивость: Да

## Структура проекта

```
.
├── main.c          # Исходный код программы
├── main.h          # Заголовочный файл
├── output/         # Директория для выходных данных
│   ├── keys_out.txt   # Файл с отсортированными ключами
│   └── values_out.txt # Файл с отсортированными значениями
└── tests/          # Директория с тестовыми данными
    ├── keys/       # Ключи тестовых данных
    │   ├── heart.txt
    │   ├── reverse.txt
    │   ├── straight.txt
    │   ├── poem.txt
    │   ├── big.txt
    │   └── twins.txt
    └── values/     # Значения тестовых данных
        ├── heart.txt
        ├── reverse.txt
        ├── straight.txt
        ├── poem.txt
        ├── big.txt
        └── twins.txt
```

## Компиляция

Для компиляции программы используйте команду:
```bash
gcc main.c -o sort_binary_insertion
```

## Использование

### Базовый синтаксис:
```bash
./sort_binary_insertion [опции] <входной_файл>
```

### Доступные опции:

| Опция | Описание |
|-------|----------|
| `-s <ключ>` | Поиск записи по указанному ключу |
| `-t [N]` | Вывод последних N строк (по умолчанию 12) |
| `-i` | Вывод статистики сортировки |
| `-q` | Тихий режим (без вывода таблицы) |
| `-h` | Вывод справки |

### Примеры использования:

1. Показать справку:
```bash
./sort_binary_insertion -h
```

2. Сортировка файла с выводом всех записей:
```bash
./sort_binary_insertion tests/big.txt
```

3. Поиск записи с ключом "apple":
```bash
./sort_binary_insertion -s apple tests/big.txt
```

4. Вывод последних 5 строк:
```bash
./sort_binary_insertion -t 5 tests/big.txt
```

5. Вывод статистики сортировки:
```bash
./sort_binary_insertion -i tests/big.txt
```

6. Комбинирование опций:
```bash
./sort_binary_insertion -i -t 5 -s apple tests/big.txt
```

### Формат входных данных

Тестовые данные хранятся в двух папках: `tests/keys` и `tests/values`. Для каждого тестового набора данных:
- Файл в `tests/keys/<имя_файла>` содержит ключи (по одному на строку).
- Файл в `tests/values/<имя_файла>` содержит значения (по одному на строку).
- Ключи и значения связаны по номеру строки.

Пример для `tests/keys/big.txt`:
```
apple
berry
cherry
```

Пример для `tests/values/big.txt`:
```
один
два
три
```

### Выходные данные

1. Отсортированные данные записываются в два файла:
   - `output/keys_out.txt` (ключи)
   - `output/values_out.txt` (значения)
2. В консоль выводится:
   - Отсортированная таблица (если не указан флаг `-q`)
   - Статистика сортировки (если указан флаг `-i`)
   - Результаты поиска (если указан флаг `-s`)

## Особенности реализации

1. **Устойчивость сортировки:**
   - Алгоритм сохраняет относительный порядок элементов с одинаковыми ключами
   - Достигается за счет учета исходного порядка элементов при определении позиции вставки

2. **Обработка ошибок:**
   - Проверка длины ключа (не более 5 знаков)
   - Проверка существования файлов ключей и значений
   - Проверка совпадения количества строк в файлах ключей и значений
   - Корректная обработка некорректных опций командной строки

3. **Оптимизации:**
   - Использование бинарного поиска для уменьшения количества сравнений
   - Эффективное хранение данных в памяти
   - Поддержка UTF-8 кодировки для корректного отображения кириллицы

## Ограничения

- Максимальное количество записей: 1000
- Максимальная длина ключа: 5 знаков
- Максимальная длина значения: 256 знаков